<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Troy E. Kinney</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" type="image/svg+xml" href="media/TK.svg">
  <script src="https://kit.fontawesome.com/6ba8d5bf94.js" crossorigin="anonymous"></script>
</head>

<body>
  <div class="wrapper">
    <div id="text" style="width:100%;">
      <h1 id="title" style="text-align:center;"></h1>
      <p id="desc" style="text-align:center;"></p>
    </div>
<!--<div id="asciiContainer">
      <iframe class="ascii-art" src=troy.txt>
    </div>-->
    <div id="socials" style="display: flex;">
      <button id="email" class="social-button" style="display: none;" onclick="window.location.href = 'mailto:troy@ekinney.com';">
        <span id="email-icon" class="icon"><i class="fa-solid fa-envelope"></i></span>
      </button>
      <button id="linkedIn" class="social-button" style="display: none;" onclick="window.location.href = 'https://www.linkedin.com/in/troy-e-kinney';">
        <span id="linkedIn-icon" class="icon"><i class="fa-brands fa-square-linkedin"></i></span>
      </button>
      <button id="github" class="social-button" style="display: none;" onclick="window.location.href = 'https://www.github.com/treki722';">
        <span id="github-icon" class="icon"><i class="fa-brands fa-github"></i></span>
      </button>
    </div>
    <div id="options" style="display: none; margin-top:15px; margin:30px;">
      <button onclick="window.location.href = 'https://www.troyekinney.com/work.html';">Work</button>
      <button onclick="window.location.href = 'https://www.troyekinney.com/involvements.html';">Involvements</button>
      <button onclick="contentDeterminer('philosphy')">Philosophy</button>
      <button onclick="window.location.href = 'https://www.troyekinney.com/resume.html';">Resume</button>
      <button onclick="contentDeterminer('references')">References</button>
      <script src="https://kit.fontawesome.com/6ba8d5bf94.js" crossorigin="anonymous"></script>
    </div>
    <div id="contentContainer">
      <p id="content" style="text-align:center; display:none;"></p>
    </div>
  </div>

  
  <script>
    const referrer = document.referrer;
    const currentHost = window.location.host;
    const internalRef = referrer && new URL(referrer).host === currentHost;
  
    const titleText = "Hi! I'm Troy Kinney.";
    const description = "I'm a high school developer and tech nerd. Feel free to look around.";

    const philosophyText = "I used to be a big-time procrastinater, and all though I still am at heart, I understand when it really is better to just get the job done. \n I believe it is important to always be ontop of your work & ahead of due dates, preventing late completions and any other issues that may arise.";
    const referencesText = "This is a placeholder";
    
    const speed = 35;
  
    let titleIndex = 0;
    let descriptionIndex = 0;
    let contentIndex = 0;
  
    window.onload = () => {
      if (internalRef) {
        const titleEl = document.getElementById("title");
        const descEl = document.getElementById("desc");
        const optionsEl = document.getElementById("options");
    
        titleEl.textContent = titleText;
        descEl.textContent = description;
        
        titleEl.classList.add("fade-in");
        descEl.classList.add("fade-in");
        optionsEl.style.display = "inline-block";
        optionsEl.classList.add("fade-in");
      } else {
        startTyping();
      }
    
      // const asciiContainer = document.getElementById('ascii-art');
      // fetch('https://raw.githubusercontent.com/TrEKi722/troyekinney.com/main/troy.txt')
      //   .then(response => {
      //     if (!response.ok) throw new Error('Network response was not ok');
      //     return response.text();
      //   })
      //   .then(data => {
      //     asciiContainer.textContent = data;
      //   })
      //   .catch(error => {
      //     asciiContainer.textContent = 'Failed to load ASCII art.';
      //     console.error('Fetch error:', error);
      //   });
    };
  
    function startTyping() {
      const container = document.getElementById("title");
      container.innerHTML = "_";
      typeTitle();
    }
  
    function typeTitle() {
      const container = document.getElementById("title");
      if (titleIndex < titleText.length) {
        container.innerHTML = container.innerHTML.slice(0, -1);
        container.innerHTML += (titleText[titleIndex] === "\n" ? "<br>" : titleText[titleIndex]) + "_";
        titleIndex++;
        setTimeout(typeTitle, speed);
      } else {
        container.innerHTML = container.innerHTML.slice(0, -1);
        typeDescription();
      }
    }
  
    function typeDescription() {
      const container = document.getElementById("desc");
      if (descriptionIndex < description.length) {
        container.innerHTML = container.innerHTML.slice(0, -1);
        container.innerHTML += (description[descriptionIndex] === "\n" ? "<br>" : description[descriptionIndex]) + "_";
        descriptionIndex++;
        setTimeout(typeDescription, speed);
      } else {
        document.getElementById("desc").innerHTML = document.getElementById("desc").innerHTML.slice(0, -1);
        setTimeout(() => {
          document.getElementById("email").style.display = "flex";
          setTimeout(() => {
            document.getElementById("linkedIn").style.display = "flex";
            setTimeout(() => {
              document.getElementById("github").style.display = "flex";
              setTimeout(() => {
                document.getElementById("options").style.display = "inline-block";
              }, 200);
            }, 200);
          }, 200);
        }, 200);
      }
    }

    function contentDeterminer(section) {
      contentIndex = 0;
      document.getElementById("content").innerHTML = "";
      document.getElementById("content").style.display = "inline-block";
      if (section === "philosophy") {
        typeContent(philosophyText);
      } else if (section === "references") {
        typeContent(referencesText);
      }
    }

    function typeContent(content) {
      const container = document.getElementById("content");
      if (contentIndex < content.length) {
        container.innerHTML = container.innerHTML.slice(0, -1);
        container.innerHTML += (content[contentIndex] === "\n" ? "<br>" : content[contentIndex]) + "_";
        contentIndex++;
        setTimeout(typeContent, speed);
      } else {
        document.getElementById("content").innerHTML = document.getElementById("content").innerHTML.slice(0, -1);
      }
    }
  </script>
</body>
</html>
